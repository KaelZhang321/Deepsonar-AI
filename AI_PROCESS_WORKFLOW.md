# DeepSonar AI å¤„ç†æµç¨‹è¯¦è§£

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

DeepSonar AI æ˜¯ä¸€ä¸ªåŸºäº CrewAI å¤šæ™ºèƒ½ä½“æ¶æ„çš„å•†ä¸šåˆ†æå¹³å°ï¼Œé€šè¿‡æ¨¡æ‹ŸçœŸå®å•†ä¸šå’¨è¯¢å›¢é˜Ÿçš„å·¥ä½œæµç¨‹ï¼Œä¸ºç”¨æˆ·æä¾›ä¸“ä¸šçš„å¸‚åœºåˆ†ææŠ¥å‘Šã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶
- **AIå¼•æ“æ¨¡å—** (`ai_engine/`) - CrewAIå¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
- **Chainlitç•Œé¢** (`interface/`) - ç”¨æˆ·äº¤äº’ç•Œé¢
- **Djangoåç«¯** (`backend/`) - æ•°æ®å­˜å‚¨å’Œä¸šåŠ¡é€»è¾‘
- **æœç´¢å·¥å…·** - åšæŸ¥AIç½‘é¡µæœç´¢APIé›†æˆ

## ğŸ¤– AIæ™ºèƒ½ä½“å›¢é˜Ÿ

### 1. å¸‚åœºç ”ç©¶ä¸“å®¶ (Market Researcher)
**æ–‡ä»¶ä½ç½®**: `ai_engine/agents.py:60-91`

**èŒè´£**:
- ä½¿ç”¨åšæŸ¥ç½‘é¡µæœç´¢å·¥å…·è·å–æœ€æ–°çš„å¸‚åœºæ•°æ®å’Œè¡Œä¸šä¿¡æ¯
- æ”¶é›†ç«äº‰å¯¹æ‰‹æƒ…æŠ¥ã€è¡Œä¸šè¶‹åŠ¿å’Œå¸‚åœºç»Ÿè®¡æ•°æ®
- ç¡®ä¿æ‰€æœ‰ä¿¡æ¯éƒ½æœ‰å¯é çš„å¼•ç”¨æ¥æº

**ç‰¹ç‚¹**:
- 15å¹´å•†ä¸šæƒ…æŠ¥åˆ†æç»éªŒçš„äººè®¾
- å¼ºåˆ¶ä½¿ç”¨ä¸­æ–‡è¾“å‡º
- æœç´¢ç»“æœåŒ…å«å¼•ç”¨ç¼–å· [1]ã€[2] ç­‰
- å½“å‰å·¥å…·æš‚æ—¶ç¦ç”¨ï¼ˆæµ‹è¯•å…¼å®¹æ€§ï¼‰

### 2. å•†ä¸šåˆ†æå¸ˆ (Business Analyst)
**æ–‡ä»¶ä½ç½®**: `ai_engine/agents.py:93-124`

**èŒè´£**:
- åˆ†æç ”ç©¶æ•°æ®ï¼Œæ’°å†™ç»“æ„åŒ–çš„å•†ä¸šåˆ†ææŠ¥å‘Š
- è¿›è¡ŒSWOTåˆ†æå’Œæˆ˜ç•¥å»ºè®®
- ç¡®ä¿æŠ¥å‘Šæ ¼å¼è§„èŒƒã€é€»è¾‘æ¸…æ™°

**è¾“å‡ºç»“æ„**:
1. Executive Summary (æ‰§è¡Œæ‘˜è¦)
2. Market Analysis (å¸‚åœºåˆ†æ)
3. Competitive Landscape (ç«äº‰æ ¼å±€)
4. SWOT Analysis
5. Key Insights and Findings (å…³é”®æ´å¯Ÿ)
6. Strategic Recommendations (æˆ˜ç•¥å»ºè®®)
7. Conclusion (ç»“è®º)
8. ã€å‚è€ƒæ–‡çŒ®ã€‘ç« èŠ‚

### 3. è´¨é‡å®¡æ ¸æ€»ç›‘ (Quality Supervisor)
**æ–‡ä»¶ä½ç½®**: `ai_engine/agents.py:126-164`

**èŒè´£**:
- å®¡æ ¸æŠ¥å‘Šè´¨é‡ã€å‡†ç¡®æ€§å’Œå®Œæ•´æ€§
- ç¡®ä¿æŠ¥å‘Šè¾¾åˆ°ä¸“ä¸šæ ‡å‡†
- å†³å®šæ˜¯å¦æ‰¹å‡†æˆ–è¦æ±‚ä¿®æ”¹

**å®¡æ ¸æ ‡å‡†**:
- å®Œæ•´æ€§ï¼šæ‰€æœ‰å¿…éœ€ç« èŠ‚æ˜¯å¦å­˜åœ¨ä¸”è¯¦å®
- å‡†ç¡®æ€§ï¼šè®ºæ–­æ˜¯å¦æœ‰ç ”ç©¶æ•°æ®æ”¯æŒ
- æ¸…æ™°åº¦ï¼šå†™ä½œæ˜¯å¦ä¸“ä¸šä¸”ç»„ç»‡è‰¯å¥½
- ä»·å€¼ï¼šå»ºè®®æ˜¯å¦å…·æœ‰å¯æ“ä½œæ€§

## ğŸ”„ å¤„ç†æµç¨‹è¯¦è§£

### é˜¶æ®µ1: ä»»åŠ¡åˆå§‹åŒ–
**æ–‡ä»¶ä½ç½®**: `interface/app.py:354-401`

1. **ç”¨æˆ·è¾“å…¥å¤„ç†**
   - æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„åˆ†æä¸»é¢˜
   - åˆ›å»ºæ•°æ®åº“è®°å½•å’ŒèŠå¤©ä¼šè¯
   - åˆå§‹åŒ–åˆ†æçŠ¶æ€

2. **AIå›¢é˜Ÿå‡†å¤‡**
   - åˆ›å»º BusinessAnalysisCrew å®ä¾‹
   - åˆå§‹åŒ–ä¸‰ä¸ªAIæ™ºèƒ½ä½“
   - è®¾ç½®ä»»åŠ¡æµæ°´çº¿

### é˜¶æ®µ2: å¸‚åœºç ”ç©¶
**æ–‡ä»¶ä½ç½®**: `ai_engine/tasks.py:14-48`

```python
# ç ”ç©¶ä»»åŠ¡å®šä¹‰
def create_research_task(topic: str, researcher: Agent) -> Task:
    description = f"Conduct comprehensive research on: '{topic}'"
    # æ¶µç›–ï¼šå¸‚åœºæ¦‚è§ˆã€ä¸»è¦å‚ä¸è€…ã€è¶‹åŠ¿ã€æŒ‘æˆ˜æœºé‡ã€æœªæ¥é¢„æµ‹
```

**æ‰§è¡Œå†…å®¹**:
- å¸‚åœºè§„æ¨¡å’Œå¢é•¿è¶‹åŠ¿åˆ†æ
- ä¸»è¦ç«äº‰å¯¹æ‰‹è¯†åˆ«
- æœ€æ–°å‘å±•å’Œè¶‹åŠ¿ç ”ç©¶
- æŒ‘æˆ˜å’Œæœºé‡è¯„ä¼°
- æœªæ¥ outlook é¢„æµ‹

### é˜¶æ®µ3: å•†ä¸šåˆ†æ
**æ–‡ä»¶ä½ç½®**: `ai_engine/tasks.py:50-88`

```python
# åˆ†æä»»åŠ¡å®šä¹‰
def create_analysis_task(topic: str, analyst: Agent, context: list[Task]) -> Task:
    description = "Analyze research data and create comprehensive business report"
    # è¾“å‡ºç»“æ„åŒ–MarkdownæŠ¥å‘Š
```

**æ‰§è¡Œå†…å®¹**:
- æ•°æ®æ•´åˆå’Œæ´å¯Ÿæå–
- SWOTåˆ†ææ¡†æ¶åº”ç”¨
- æˆ˜ç•¥å»ºè®®åˆ¶å®š
- ä¸“ä¸šæŠ¥å‘Šæ’°å†™

### é˜¶æ®µ4: è´¨é‡å®¡æ ¸
**æ–‡ä»¶ä½ç½®**: `ai_engine/tasks.py:91-149`

**å®¡æ ¸æµç¨‹**:
1. **è´¨é‡è¯„ä¼°**: å¯¹ç…§5å¤§æ ‡å‡†è¿›è¡Œè¯„åˆ†
2. **å†³ç­–åˆ¶å®š**: å†³å®šæ‰¹å‡†æˆ–è¦æ±‚ä¿®æ”¹
3. **ç»“æœå¤„ç†**:
   - é«˜è´¨é‡ï¼šç›´æ¥æ‰¹å‡†è¾“å‡º
   - éœ€æ”¹è¿›ï¼šæä¾›å…·ä½“åé¦ˆæ„è§

### é˜¶æ®µ5: ç»“æœå¤„ç†
**æ–‡ä»¶ä½ç½®**: `interface/app.py:431-465`

```python
# AIå¤„ç†å’Œç»“æœä¿å­˜
result = await crew.run_async(topic)
filtered_result = filter_review_content(result)  # è¿‡æ»¤å®¡æ ¸æ„è§
await mark_report_completed(report, filtered_result)
```

**åå¤„ç†æ­¥éª¤**:
1. **å†…å®¹è¿‡æ»¤**: ç§»é™¤å®¡æ ¸æ„è§ï¼Œä¿ç•™çº¯å‡€æŠ¥å‘Š
2. **æ•°æ®åº“å­˜å‚¨**: ä¿å­˜æœ€ç»ˆæŠ¥å‘Šå’Œåˆ†æè®°å½•
3. **ç”¨æˆ·ç•Œé¢æ›´æ–°**: å®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œç»“æœ

## ğŸ”§ æŠ€æœ¯å®ç°

### LLMé…ç½®
**æ–‡ä»¶ä½ç½®**: `ai_engine/agents.py:27-56`

```python
def get_ark_llm() -> LLM:
    # ç«å±±å¼•æ“ARK APIé…ç½®
    model_endpoint = "ep-20251123151038-946rh"
    temperature=0.7
    max_tokens=8192  # æ”¯æŒé•¿ä¸Šä¸‹æ–‡
```

### CrewAIç¼–æ’
**æ–‡ä»¶ä½ç½®**: `ai_engine/crew.py:21-164`

- **é¡ºåºæ‰§è¡Œæ¨¡å¼** (Process.sequential)
- **ä»»åŠ¡ä¾èµ–ç®¡ç†**: ç ”ç©¶â†’åˆ†æâ†’å®¡æ ¸
- **å¼‚æ­¥æ”¯æŒ**: `run_async()` æ–¹æ³•

### æœç´¢å·¥å…·é›†æˆ
**æ–‡ä»¶ä½ç½®**: `ai_engine/tools.py:153-241`

```python
class BochaWebSearchTool(BaseTool):
    # åšæŸ¥AIç½‘é¡µæœç´¢API
    # è¿”å›å¸¦å¼•ç”¨ç¼–å·çš„æœç´¢ç»“æœ
    # æ”¯æŒä¸­æ–‡æœç´¢å’Œç»“æœæ ¼å¼åŒ–
```

## ğŸ“Š ç”¨æˆ·äº¤äº’æµç¨‹

### Chainlitç•Œé¢æµç¨‹
**å…¥å£**: `interface/app.py:258-330`

1. **æ¬¢è¿ç•Œé¢**: ä¸­æ–‡æœ¬åœ°åŒ–çš„ä½¿ç”¨è¯´æ˜
2. **å®æ—¶è¿›åº¦**: é€šè¿‡Stepsæ˜¾ç¤ºå„é˜¶æ®µæ‰§è¡ŒçŠ¶æ€
3. **å†å²ç®¡ç†**: æ”¯æŒæŸ¥çœ‹å†å²å¯¹è¯å’ŒæŠ¥å‘Š
4. **ç»“æœå±•ç¤º**: Markdownæ ¼å¼çš„æœ€ç»ˆæŠ¥å‘Š

### è¿›åº¦æ˜¾ç¤ºé€»è¾‘
```python
async with cl.Step(name="ğŸ” Market Researcher", type="tool") as research_step:
    research_step.output = "â€¢ Analyzing market size and growth trends"

async with cl.Step(name="ğŸ“ˆ Business Analyst", type="tool") as analyst_step:
    analyst_step.output = "â€¢ Synthesizing market research"

async with cl.Step(name="âœ… Quality Supervisor", type="tool") as review_step:
    review_step.output = "Ensuring report quality and completeness"
```

## ğŸ—„ï¸ æ•°æ®æŒä¹…åŒ–

### æ•°æ®æ¨¡å‹å…³ç³»
- **User**: ç”¨æˆ·ä¿¡æ¯å’Œä¼šå‘˜ç­‰çº§
- **Report**: åˆ†ææŠ¥å‘Šè®°å½•
- **ChatSession**: å¯¹è¯ä¼šè¯ç®¡ç†
- **ChatMessage**: æ¶ˆæ¯å†å²å­˜å‚¨

### å…³é”®ä¸šåŠ¡é€»è¾‘
- **ä¼šå‘˜ç­‰çº§é™åˆ¶**: æ¯æ—¥æŠ¥å‘Šç”Ÿæˆé™é¢
- **å†…å®¹è¿‡æ»¤**: è‡ªåŠ¨ç§»é™¤å®¡æ ¸æ„è§
- **Markdownæ¸²æŸ“**: æ”¯æŒå¯Œæ–‡æœ¬æ˜¾ç¤ºå’Œå¯¼å‡º

## ğŸ” æœç´¢èƒ½åŠ›

### åšæŸ¥AIé›†æˆ
- **å®æ—¶æ•°æ®**: è·å–æœ€æ–°ç½‘é¡µä¿¡æ¯
- **å¼•ç”¨ç®¡ç†**: è‡ªåŠ¨ç¼–å·å’Œæ¥æºè¿½è¸ª
- **ä¸­æ–‡ä¼˜åŒ–**: é’ˆå¯¹ä¸­æ–‡æœç´¢ç»“æœä¼˜åŒ–
- **ç»“æœæ ¼å¼åŒ–**: ç»“æ„åŒ–çš„æœç´¢ç»“æœè¾“å‡º

### æœç´¢ç»“æœåº”ç”¨
- åœ¨å¸‚åœºç ”ç©¶é˜¶æ®µæä¾›æ•°æ®æ”¯æŒ
- åœ¨åˆ†ææŠ¥å‘Šä¸­ä½œä¸ºå¼•ç”¨æ¥æº
- ç¡®ä¿æŠ¥å‘Šçš„æ—¶æ•ˆæ€§å’Œå‡†ç¡®æ€§

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ä¸Šä¸‹æ–‡ç®¡ç†
- **Tokené™åˆ¶**: 8192 tokensæ”¯æŒé•¿å†…å®¹
- **å†…å­˜ç®¡ç†**: Agent memoryåŠŸèƒ½
- **å¼‚æ­¥å¤„ç†**: é¿å…ç•Œé¢é˜»å¡

### è´¨é‡æ§åˆ¶
- **å¤šå±‚å®¡æ ¸**: ç ”ç©¶â†’åˆ†æâ†’å®¡æ ¸ä¸‰é‡ä¿éšœ
- **æ¨¡æ¿æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„æŠ¥å‘Šç»“æ„
- **å¼•ç”¨éªŒè¯**: ç¡®ä¿æ•°æ®æ¥æºå¯é æ€§

## ğŸ› ï¸ é…ç½®å’Œéƒ¨ç½²

### ç¯å¢ƒå˜é‡
```bash
# ç«å±±å¼•æ“ARK API
ARK_API_KEY=your_api_key
ARK_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
ARK_MODEL_ENDPOINT=ep-20251123151038-946rh

# åšæŸ¥æœç´¢API
BOCHA_API_KEY=your_bocha_key

# Djangoé…ç½®
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
```

### æœåŠ¡å¯åŠ¨
```bash
# Djangoåç«¯
python manage.py runserver 8000

# Chainlitç•Œé¢
chainlit run interface/app.py --port 8001
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### æœ€ä½³å®è·µ
1. **ä¸»é¢˜é€‰æ‹©**: ä½¿ç”¨å…·ä½“ã€æ˜ç¡®çš„åˆ†æä¸»é¢˜
2. **è¯­è¨€ä¸€è‡´æ€§**: å…¨ç¨‹ä½¿ç”¨ä¸­æ–‡è·å¾—æœ€ä½³ä½“éªŒ
3. **æŠ¥å‘Šå¯¼å‡º**: æ”¯æŒMarkdownã€Wordã€PDFå¤šç§æ ¼å¼
4. **å†å²æŸ¥çœ‹**: åˆ©ç”¨ä¼šè¯å†å²ç®¡ç†åˆ†æè®°å½•

### æ³¨æ„äº‹é¡¹
- å½“å‰æœç´¢å·¥å…·æš‚æ—¶ç¦ç”¨ï¼ŒAgentåŸºäºå†…ç½®çŸ¥è¯†åˆ†æ
- å®¡æ ¸æ„è§ä¼šè¢«è‡ªåŠ¨è¿‡æ»¤ï¼Œä¸å½±å“æœ€ç»ˆæŠ¥å‘Šè´¨é‡
- ä¼šå‘˜ç­‰çº§å½±å“æ¯æ—¥å¯ç”ŸæˆæŠ¥å‘Šæ•°é‡

---

*æœ¬æ–‡æ¡£åŸºäº DeepSonar-AI é¡¹ç›®å½“å‰æ¶æ„ç”Ÿæˆï¼Œåæ˜  2025-12-09 çš„ç³»ç»ŸçŠ¶æ€ã€‚*